<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"  th:replace="~{layout :: layout(~{::title}, ~{::content})}">
<head>
    <meta charset="UTF-8">
    <title>자유게시판</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.css"/>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/sub.css">
    <link rel="stylesheet" href="/css/board.css">
</head>
<body>
<div th:fragment="content">
    <div class="container mt-5">
        <h1 class="mb-4">자유게시판</h1>

        <!--게시판 선택-->
        <div class="board-container">
            <div class="board-box" th:classappend="${category == 'free'} ? 'active active-free' : ''"
                 onclick="location.href='/freeboard'">
                자유 게시판
            </div>
            <div class="board-box" th:classappend="${category == 'qna'} ? 'active' : ''"
                 onclick="location.href='/qnaboard'">
                질문 게시판
            </div>
            <div class="board-box" th:classappend="${sort == 'hitcount'} ? 'active' : ''"
                 onclick="location.href='/freeboard?sort=hitcount'">
                조회순
            </div>
        </div>

<!--        검색탭-->
        <div class="mt-3">
            <form action="/b_search" method="get" class="form-inline">
                <input type="text" name="searchWord" class="form-control mr-2" placeholder="검색어를 입력하세요">
                <select name="searchType" class="form-control mr-2">
                    <option value="title">제목</option>
                    <option value="content">내용</option>
                </select>
                <select name="category" class="form-control mr-2">
                    <option value="all">전체</option>
                    <option value="free">자유</option>
                    <option value="qna">질문</option>
                </select>
                <button type="submit" class="btn btn-primary">검색</button>
            </form>
        </div>

        <div class="card p-4">
            <table class="table table-bordered table-hover">
                <thead>
                <tr>
                    <th>번호</th>
                    <th>제목</th>
                    <th>작성자</th>
                    <th>조회수</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="board : ${boardList}" th:data-num="${board.num}" style="cursor:pointer;" onclick="location.href='/b_selectOne?num=' + this.getAttribute('data-num')">
                    <td>[[${board.num}]]</td>
                    <td th:text="${board.title}"></td>
                    <td th:text="${board.user_id}"></td>
                    <td th:text="${board.boardhitcount}"></td>
                </tr>
                </tbody>
            </table>
            <nav aria-label="Page navigation">
                <ul class="pagination justify-content-center">
                    <li class="page-item" th:if="${currentPage > 1}">
                        <a class="page-link" th:href="@{/freeboard(page=${currentPage - 1}, sort=${sort})}"
                           aria-label="Previous">
                            <span aria-hidden="true">&laquo;</span>
                        </a>
                    </li>
                    <li class="page-item" th:each="i : ${#numbers.sequence(1, totalPages)}"
                        th:classappend="${i == currentPage} ? 'active'">
                        <a class="page-link" th:href="@{/freeboard(page=${i}, sort=${sort})}" th:text="${i}"></a>
                    </li>
                    <li class="page-item" th:if="${currentPage < totalPages}">
                        <a class="page-link" th:href="@{/freeboard(page=${currentPage + 1}, sort=${sort})}"
                           aria-label="Next">
                            <span aria-hidden="true">&raquo;</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>

        <div class="mt-3">
            <a href="/b_insert" class="btn btn-primary">글작성</a>
        </div>

    </div>


</div>


<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html>