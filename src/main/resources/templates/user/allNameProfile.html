<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>User Information</title>
    <!-- Bootstrap CSS CDN -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.css" />
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/sub.css">
</head>

<style>
    .container {
        margin-top: 20px; /* 상단 여백 */
    }
    h3 {
        text-align: center; /* 제목 가운데 정렬 */
    }
    .list-group-item {
        border: 1px solid #dee2e6; /* 아이템 테두리 */
        border-radius: 5px; /* 모서리 둥글게 */
        background-color: #ffffff; /* 배경색 */
        margin-bottom: 10px; /* 하단 여백 */
    }
    .pagination {
        justify-content: center; /* 페이지네이션 중앙 정렬 */
    }
</style>

<header th:replace="~{header :: header}"></header>
<body>
<div class="container">

    <!-- Forum Section -->
    <div th:if="${type == 'forum'}">
        <!-- forumList가 비어있지 않으면 -->
        <h3 th:if="${not #lists.isEmpty(forumList)}" th:text="${forumList[0].name} + '의 포럼'"></h3>

        <!-- forumList가 비어있으면 -->
        <div th:if="${#lists.isEmpty(forumList)}">
            <p>데이터 없음</p>
        </div>

        <ul class="list-group">
            <!-- 포럼 목록 출력 -->
            <li class="list-group-item" th:each="forum : ${forumList}">
                <h6 th:text="${forum.title}"></h6>
                <p th:text="${forum.content}"></p>
                <p><small>작성자: <span th:text="${forum.user_id}"></span></small></p>
                <p><small>날짜: <span th:text="${forum.wdate}"></span></small></p>
                <p><small>조회수: <span th:text="${forum.hitcount}"></span></small></p>
                <a th:href="@{/forum/view(num=${forum.num})}" class="btn btn-primary">상세보기</a> <!-- 상세보기 링크 추가 -->
            </li>
        </ul>

        <!-- 페이지네이션 -->
        <div class="pagination" th:if="${!#lists.isEmpty(forumList)}">
            <ul class="pagination">
                <!-- 이전 페이지 버튼 -->
                <li class="page-item" th:classappend="${currentPage == 0} ? 'disabled'">
                    <a class="page-link" th:href="@{/user/profile/id/pazing/{type}/{id}(type=${type}, id=${forumList[0]?.user_id}, page=${currentPage - 1 >= 0 ? currentPage - 1 : 0})}">이전</a>
                </li>

                <!-- 페이지 번호 링크들 -->
                <li class="page-item" th:each="i : ${#numbers.sequence(0, commentTotalPages - 1)}"
                    th:classappend="${i == currentPage} ? 'active'">
                    <a class="page-link" th:href="@{/user/profile/id/pazing/{type}/{id}(type=${type}, id=${forumList[0]?.user_id}, page=${i})}" th:text="${i + 1}"></a>
                </li>

                <!-- 다음 페이지 버튼 -->
                <li class="page-item" th:classappend="${currentPage == commentTotalPages - 1} ? 'disabled'">
                    <a class="page-link" th:href="@{/user/profile/id/pazing/{type}/{id}(type=${type}, id=${forumList[0]?.user_id}, page=${currentPage + 1 < commentTotalPages ? currentPage + 1 : currentPage})}">다음</a>
                </li>
            </ul>
        </div>
    </div>

    <!-- Board Section -->
    <div th:if="${type == 'board'}">
        <ul class="list-group">
            <!-- 데이터 없음 메시지 -->
            <h3 th:if="${not #lists.isEmpty(boardList)}" th:text="${boardList[0].name} + '의 게시물'"></h3>

            <!-- forumList가 비어있으면 -->
            <div th:if="${#lists.isEmpty(boardList)}">
                <p>데이터 없음</p>
            </div>

            <!-- 게시판 목록 출력 -->
            <li class="list-group-item" th:each="board : ${boardList}">
                <h6 th:text="${board.title}"></h6>
                <p th:text="${board.content}"></p>
                <p><small>작성자: <span th:text="${board.user_id}"></span></small></p>
                <p><small>날짜: <span th:text="${#dates.format(board.wdate, 'yyyy-MM-dd HH:mm:ss')}"></span></small></p>
                <p><small>조회수: <span th:text="${board.boardhitcount}"></span></small></p>
                <a th:href="@{/b_selectOne(num=${board.num})}" class="btn btn-primary">상세보기</a>
            </li>
        </ul>

        <!-- 페이지네이션 -->
        <div class="pagination" th:if="${!#lists.isEmpty(boardList)}">
            <ul class="pagination">
                <!-- 이전 페이지 버튼 -->
                <li class="page-item" th:classappend="${currentPage == 0} ? 'disabled'">
                    <a class="page-link" th:href="@{/user/profile/id/pazing/{type}/{id}(type=${type}, id=${boardList[0]?.user_id}, page=${currentPage - 1 >= 0 ? currentPage - 1 : 0})}">이전</a>
                </li>

                <!-- 페이지 번호 링크들 -->
                <li class="page-item" th:each="i : ${#numbers.sequence(0, commentTotalPages - 1)}"
                    th:classappend="${i == currentPage} ? 'active'">
                    <a class="page-link" th:href="@{/user/profile/id/pazing/{type}/{id}(type=${type}, id=${boardList[0]?.user_id}, page=${i})}" th:text="${i + 1}"></a>
                </li>

                <!-- 다음 페이지 버튼 -->
                <li class="page-item" th:classappend="${currentPage == commentTotalPages - 1} ? 'disabled'">
                    <a class="page-link" th:href="@{/user/profile/id/pazing/{type}/{id}(type=${type}, id=${boardList[0]?.user_id}, page=${currentPage + 1 < commentTotalPages ? currentPage + 1 : currentPage})}">다음</a>
                </li>
            </ul>
        </div>
    </div>

    <!-- Reviews -->
    <div th:if="${type == 'review'}">
        <ul class="list-group">
            <!-- 데이터 없음 메시지 -->
            <h3 th:if="${not #lists.isEmpty(reviewList)}" th:text="${reviewList[0].name} + '의 리뷰'"></h3>

            <!-- forumList가 비어있으면 -->
            <div th:if="${#lists.isEmpty(reviewList)}">
                <p>데이터 없음</p>
            </div>

            <!-- 리뷰 목록 출력 -->
            <li class="list-group-item" th:each="review : ${reviewList}">
                <h6 th:text="${review.title}"></h6>
                <p th:text="${review.content}"></p>
                <p><small>작성자: <span th:text="${review.user_id}"></span></small></p>
                <p><small>날짜: <span th:text="${#dates.format(review.wdate, 'yyyy-MM-dd HH:mm:ss')}"></span></small></p>
                <p><small>좋아요: <span th:text="${review.like}"></span></small></p>
                <p><small>싫어요: <span th:text="${review.hate}"></span></small></p>
                <a th:href="@{/review/detail(num=${review.num})}" class="btn btn-primary">상세보기</a>
            </li>
        </ul>

        <!-- 페이지네이션 -->
        <div class="pagination" th:if="${!#lists.isEmpty(reviewList)}">
            <ul class="pagination">
                <!-- 이전 페이지 버튼 -->
                <li class="page-item" th:classappend="${currentPage == 0} ? 'disabled'">
                    <a class="page-link" th:href="@{/user/profile/id/pazing/{type}/{id}(type=${type}, id=${reviewList[0]?.user_id}, page=${currentPage - 1 >= 0 ? currentPage - 1 : 0})}">이전</a>
                </li>

                <!-- 페이지 번호 링크들 -->
                <li class="page-item" th:each="i : ${#numbers.sequence(0, commentTotalPages - 1)}"
                    th:classappend="${i == currentPage} ? 'active'">
                    <a class="page-link" th:href="@{/user/profile/id/pazing/{type}/{id}(type=${type}, id=${reviewList[0]?.user_id}, page=${i})}" th:text="${i + 1}"></a>
                </li>

                <!-- 다음 페이지 버튼 -->
                <li class="page-item" th:classappend="${currentPage == commentTotalPages - 1} ? 'disabled'">
                    <a class="page-link" th:href="@{/user/profile/id/pazing/{type}/{id}(type=${type}, id=${reviewList[0]?.user_id}, page=${currentPage + 1 < commentTotalPages ? currentPage + 1 : currentPage})}">다음</a>
                </li>
            </ul>
        </div>
    </div>

    <!-- Comments  -->
    <div th:if="${type == 'comment'}">
        <ul class="list-group">
            <!-- 데이터 없음 메시지 -->
            <h3 th:if="${not #lists.isEmpty(commentList)}" th:text="${commentList[0].name} + '의 댓글'"></h3>

            <!-- forumList가 비어있으면 -->
            <div th:if="${#lists.isEmpty(commentList)}">
                <p>데이터 없음</p>
            </div>

            <!-- 댓글 목록 출력 -->
            <li class="list-group-item" th:each="comment : ${commentList}"
                th:if="${!#lists.isEmpty(commentList) and (comment.bnum != 0 or comment.rnum != 0 or comment.fnum != 0)}">
                <h6 th:if="${comment.bnum != 0}">
                    게시판: <a th:href="@{/b_selectOne(num=${comment.bnum})}" th:text="'게시판'"></a>
                </h6>
                <h6 th:if="${comment.rnum != 0}">
                    리뷰: <a th:href="@{/review/detail(num=${comment.rnum})}" th:text="'리뷰'"></a>
                </h6>
                <h6 th:if="${comment.fnum != 0}">
                    포럼: <a th:href="@{/forum/view(num=${comment.fnum})}" th:text="'포럼'"></a>
                </h6>
                <p><small>내용: <span th:text="${comment.content}"></span></small></p>
                <p><small>작성자: <span th:text="${comment.user_id}"></span></small></p>
                <p><small>날짜: <span th:text="${#dates.format(comment.wdate, 'yyyy-MM-dd HH:mm:ss')}"></span></small></p>
                <div>
                    <a th:if="${comment.bnum != 0}" th:href="@{/b_selectOne(num=${comment.bnum})}" class="btn btn-info btn-sm">상세보기</a>
                    <a th:if="${comment.rnum != 0}" th:href="@{/review/detail(num=${comment.rnum})}" class="btn btn-info btn-sm">상세보기</a>
                    <a th:if="${comment.fnum != 0}" th:href="@{/forum/view(num=${comment.fnum})}" class="btn btn-info btn-sm">상세보기</a>
                </div>
            </li>
        </ul>

        <!-- 페이지네이션 -->
        <div class="pagination" th:if="${!#lists.isEmpty(commentList)}">
            <ul class="pagination">
                <!-- 이전 페이지 버튼 -->
                <li class="page-item" th:classappend="${currentPage == 0} ? 'disabled'">
                    <a class="page-link" th:href="@{/user/profile/id/pazing/{type}/{id}(type=${type}, id=${commentList[0].user_id}, page=${currentPage - 1 >= 0 ? currentPage - 1 : 0})}">이전</a>
                </li>

                <!-- 페이지 번호 링크들 -->
                <li class="page-item" th:each="i : ${#numbers.sequence(0, commentTotalPages - 1)}"
                    th:classappend="${i == currentPage} ? 'active'">
                    <a class="page-link" th:href="@{/user/profile/id/pazing/{type}/{id}(type=${type}, id=${commentList[0].user_id}, page=${i})}" th:text="${i + 1}"></a>
                </li>

                <!-- 다음 페이지 버튼 -->
                <li class="page-item" th:classappend="${currentPage == commentTotalPages - 1} ? 'disabled'">
                    <a class="page-link" th:href="@{/user/profile/id/pazing/{type}/{id}(type=${type}, id=${commentList[0].user_id}, page=${currentPage + 1 < commentTotalPages ? currentPage + 1 : currentPage})}">다음</a>
                </li>
            </ul>
        </div>
    </div>
</div>

<!-- jQuery and Bootstrap JS -->
<footer th:replace="~{footer :: footer}" class="mt-auto"></footer>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<!-- JavaScript 및 외부 라이브러리 로드 -->
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.js"></script>
<script src="/js/common.js"></script>
</body>
</html>
